#!/bin/sh
# https://github.com/dxlr8r/kubefs
if test ${UID:--1} -eq 0; then
  : ${KUBEFS_DIR:="/usr/share/kubefs"}
else
  : ${KUBEFS_DIR:="$HOME/.local/share/kubefs"}
fi
mkdir -p "$KUBEFS_DIR"
printf '%s\n' 'IyEvYmluL3NoCiMgaHR0cHM6Ly9naXRodWIuY29tL2R4bHI4ci9rdWJlZnMKX2tmc19iYXNoX2NvbXBsZXRlKCkgewpldmFsICIkKHByaW50ZiAnJXNcbicgWDJ0MVltVm1jMTlqYjIxd2JHVjBhVzl1YzE5bWFXeDBaWElvS1NCN0NteHZZMkZzSUhkdmNtUnpQU0lrTVNJS2JHOWpZV3dnWTNWeVBTUjdRMDlOVUY5WFQxSkVVMXREVDAxUVgwTlhUMUpFWFgwS2JHOWpZV3dnY21WemRXeDBQU2dwQ21sbUlGdGJJQ0lrZTJOMWNqb3dPakY5SWlBOVBTQWlMU0lnWFYwN0lIUm9aVzRLWldOb2J5QWlKSGR2Y21SeklncGxiSE5sQ21admNpQjNiM0prSUdsdUlDUjNiM0prY3pzZ1pHOEtXMXNnSWlSN2QyOXlaRG93T2pGOUlpQWhQU0FpTFNJZ1hWMGdKaVlnY21WemRXeDBLejBvSWlSM2IzSmtJaWtLWkc5dVpRcGxZMmh2SUNJa2UzSmxjM1ZzZEZzcVhYMGlDbVpwQ24wS1gydDFZbVZtYzE5amIyMXdiR1YwYVc5dWN5Z3BJSHNLYkc5allXd2dZM1Z5UFNSN1EwOU5VRjlYVDFKRVUxdERUMDFRWDBOWFQxSkVYWDBLYkc5allXd2dZMjl0Y0hkdmNtUnpQU2dpSkh0RFQwMVFYMWRQVWtSVFcwQmRPakU2SkVOUFRWQmZRMWRQVWtRdE1YMGlLUXBzYjJOaGJDQmpiMjF3YkdsdVpUMGlKSHRqYjIxd2QyOXlaSE5iS2wxOUlncGpZWE5sSUNJa1kyOXRjR3hwYm1VaUlHbHVDaWRzYjJOcklITmxjM05wYjI0Z2RHOW5aMnhsSnlvcENuZG9hV3hsSUhKbFlXUWdMWEk3SUdSdklFTlBUVkJTUlZCTVdTczlLQ0lrVWtWUVRGa2lLVHNnWkc5dVpTQThJRHdvWTI5dGNHZGxiaUF0VnlBaUpDaGZhM1ZpWldaelgyTnZiWEJzWlhScGIyNXpYMlpwYkhSbGNpQWlKQ2htYVc1a0lDSWtlMHRWUWtWR1UxOVNUMDlVT2kwa1NFOU5SUzh1YTNWaVpYMGlJQzEwZVhCbElHWWdMVzVoYldVZ0p5NXJkV0psWTI5dVptbG5KeUF5UGk5a1pYWXZiblZzYkNraUtTSWdMUzBnSWlSamRYSWlLUW83T3dvbmJHOWpheUJuYkc5aVlXd2dkRzluWjJ4bEp5b3BDbmRvYVd4bElISmxZV1FnTFhJN0lHUnZJRU5QVFZCU1JWQk1XU3M5S0NJa1VrVlFURmtpS1RzZ1pHOXVaU0E4SUR3b1kyOXRjR2RsYmlBdFZ5QWlKQ2hmYTNWaVpXWnpYMk52YlhCc1pYUnBiMjV6WDJacGJIUmxjaUFpSkNobWFXNWtJQ0lrZTB0VlFrVkdVMTlTVDA5VU9pMGtTRTlOUlM4dWEzVmlaWDBpSUMxMGVYQmxJR1lnTFc1aGJXVWdKeTVyZFdKbFkyOXVabWxuSnlBeVBpOWtaWFl2Ym5Wc2JDa2lLU0lnTFMwZ0lpUmpkWElpS1FvN093b25iRzlqYXlCelpYTnphVzl1SUd4cGMzUW5LaWtLZDJocGJHVWdjbVZoWkNBdGNqc2daRzhnUTA5TlVGSkZVRXhaS3owb0lpUlNSVkJNV1NJcE95QmtiMjVsSUR3Z1BDaGpiMjF3WjJWdUlDMVhJQ0lrS0Y5cmRXSmxabk5mWTI5dGNHeGxkR2x2Ym5OZlptbHNkR1Z5SUNJaUtTSWdMUzBnSWlSamRYSWlLUW83T3dvbmJHOWpheUJuYkc5aVlXd2diR2x6ZENjcUtRcDNhR2xzWlNCeVpXRmtJQzF5T3lCa2J5QkRUMDFRVWtWUVRGa3JQU2dpSkZKRlVFeFpJaWs3SUdSdmJtVWdQQ0E4S0dOdmJYQm5aVzRnTFZjZ0lpUW9YMnQxWW1WbWMxOWpiMjF3YkdWMGFXOXVjMTltYVd4MFpYSWdJaUlwSWlBdExTQWlKR04xY2lJcENqczdDaWRzYjJOcklITmxjM05wYjI0Z2MyVjBKeW9wQ25kb2FXeGxJSEpsWVdRZ0xYSTdJR1J2SUVOUFRWQlNSVkJNV1NzOUtDSWtVa1ZRVEZraUtUc2daRzl1WlNBOElEd29ZMjl0Y0dkbGJpQXRWeUFpSkNoZmEzVmlaV1p6WDJOdmJYQnNaWFJwYjI1elgyWnBiSFJsY2lBaUpDaG1hVzVrSUNJa2UwdFZRa1ZHVTE5U1QwOVVPaTBrU0U5TlJTOHVhM1ZpWlgwaUlDMTBlWEJsSUdZZ0xXNWhiV1VnSnk1cmRXSmxZMjl1Wm1sbkp5QXlQaTlrWlhZdmJuVnNiQ2tpS1NJZ0xTMGdJaVJqZFhJaUtRbzdPd29uYkc5amF5QnpaWE56YVc5dUlHUmxiQ2NxS1FwM2FHbHNaU0J5WldGa0lDMXlPeUJrYnlCRFQwMVFVa1ZRVEZrclBTZ2lKRkpGVUV4WklpazdJR1J2Ym1VZ1BDQThLR052YlhCblpXNGdMVmNnSWlRb1gydDFZbVZtYzE5amIyMXdiR1YwYVc5dWMxOW1hV3gwWlhJZ0lpSXBJaUF0TFNBaUpHTjFjaUlwQ2pzN0NpZHNiMk5ySUhObGMzTnBiMjRnWjJWMEp5b3BDbmRvYVd4bElISmxZV1FnTFhJN0lHUnZJRU5QVFZCU1JWQk1XU3M5S0NJa1VrVlFURmtpS1RzZ1pHOXVaU0E4SUR3b1kyOXRjR2RsYmlBdFZ5QWlKQ2hmYTNWaVpXWnpYMk52YlhCc1pYUnBiMjV6WDJacGJIUmxjaUFpSWlraUlDMHRJQ0lrWTNWeUlpa0tPenNLSjJ4dlkyc2daMnh2WW1Gc0lITmxkQ2NxS1FwM2FHbHNaU0J5WldGa0lDMXlPeUJrYnlCRFQwMVFVa1ZRVEZrclBTZ2lKRkpGVUV4WklpazdJR1J2Ym1VZ1BDQThLR052YlhCblpXNGdMVmNnSWlRb1gydDFZbVZtYzE5amIyMXdiR1YwYVc5dWMxOW1hV3gwWlhJZ0lpUW9abWx1WkNBaUpIdExWVUpGUmxOZlVrOVBWRG90SkVoUFRVVXZMbXQxWW1WOUlpQXRkSGx3WlNCbUlDMXVZVzFsSUNjdWEzVmlaV052Ym1acFp5Y2dNajR2WkdWMkwyNTFiR3dwSWlraUlDMHRJQ0lrWTNWeUlpa0tPenNLSjJ4dlkyc2daMnh2WW1Gc0lHUmxiQ2NxS1FwM2FHbHNaU0J5WldGa0lDMXlPeUJrYnlCRFQwMVFVa1ZRVEZrclBTZ2lKRkpGVUV4WklpazdJR1J2Ym1VZ1BDQThLR052YlhCblpXNGdMVmNnSWlRb1gydDFZbVZtYzE5amIyMXdiR1YwYVc5dWMxOW1hV3gwWlhJZ0lpSXBJaUF0TFNBaUpHTjFjaUlwQ2pzN0NpZHNiMk5ySUdkc2IySmhiQ0JuWlhRbktpa0tkMmhwYkdVZ2NtVmhaQ0F0Y2pzZ1pHOGdRMDlOVUZKRlVFeFpLejBvSWlSU1JWQk1XU0lwT3lCa2IyNWxJRHdnUENoamIyMXdaMlZ1SUMxWElDSWtLRjlyZFdKbFpuTmZZMjl0Y0d4bGRHbHZibk5mWm1sc2RHVnlJQ0lpS1NJZ0xTMGdJaVJqZFhJaUtRbzdPd29uYkc5amF5QnpaWE56YVc5dUp5b3BDbmRvYVd4bElISmxZV1FnTFhJN0lHUnZJRU5QVFZCU1JWQk1XU3M5S0NJa1VrVlFURmtpS1RzZ1pHOXVaU0E4SUR3b1kyOXRjR2RsYmlBdFZ5QWlKQ2hmYTNWaVpXWnpYMk52YlhCc1pYUnBiMjV6WDJacGJIUmxjaUFpYzJWMElIUnZaMmRzWlNCa1pXd2daMlYwSUd4cGMzUWlLU0lnTFMwZ0lpUmpkWElpS1FvN093b25iRzlqYXlCbmJHOWlZV3duS2lrS2QyaHBiR1VnY21WaFpDQXRjanNnWkc4Z1EwOU5VRkpGVUV4Wkt6MG9JaVJTUlZCTVdTSXBPeUJrYjI1bElEd2dQQ2hqYjIxd1oyVnVJQzFYSUNJa0tGOXJkV0psWm5OZlkyOXRjR3hsZEdsdmJuTmZabWxzZEdWeUlDSnpaWFFnZEc5bloyeGxJR1JsYkNCblpYUWdiR2x6ZENJcElpQXRMU0FpSkdOMWNpSXBDanM3Q2lkc2FYTjBMV0ZzYkNjcUtRcDNhR2xzWlNCeVpXRmtJQzF5T3lCa2J5QkRUMDFRVWtWUVRGa3JQU2dpSkZKRlVFeFpJaWs3SUdSdmJtVWdQQ0E4S0dOdmJYQm5aVzRnTFZjZ0lpUW9YMnQxWW1WbWMxOWpiMjF3YkdWMGFXOXVjMTltYVd4MFpYSWdJaUlwSWlBdExTQWlKR04xY2lJcENqczdDaWRzYVhOMEp5b3BDbmRvYVd4bElISmxZV1FnTFhJN0lHUnZJRU5QVFZCU1JWQk1XU3M5S0NJa1VrVlFURmtpS1RzZ1pHOXVaU0E4SUR3b1kyOXRjR2RsYmlBdFZ5QWlKQ2hmYTNWaVpXWnpYMk52YlhCc1pYUnBiMjV6WDJacGJIUmxjaUFpSWlraUlDMHRJQ0lrWTNWeUlpa0tPenNLSjJGMWRHZ25LaWtLZDJocGJHVWdjbVZoWkNBdGNqc2daRzhnUTA5TlVGSkZVRXhaS3owb0lpUlNSVkJNV1NJcE95QmtiMjVsSUR3Z1BDaGpiMjF3WjJWdUlDMVhJQ0lrS0Y5cmRXSmxabk5mWTI5dGNHeGxkR2x2Ym5OZlptbHNkR1Z5SUNJa0tHWnBibVFnSWlSN1MxVkNSVVpUWDFKUFQxUTZMU1JJVDAxRkx5NXJkV0psZlNJZ0xYUjVjR1VnWmlBdGJtRnRaU0FuTG10MVltVmhkWFJvSnlBeVBpOWtaWFl2Ym5Wc2JDa2lLU0lnTFMwZ0lpUmpkWElpS1FvN093b25iRzlqYXljcUtRcDNhR2xzWlNCeVpXRmtJQzF5T3lCa2J5QkRUMDFRVWtWUVRGa3JQU2dpSkZKRlVFeFpJaWs3SUdSdmJtVWdQQ0E4S0dOdmJYQm5aVzRnTFZjZ0lpUW9YMnQxWW1WbWMxOWpiMjF3YkdWMGFXOXVjMTltYVd4MFpYSWdJbWRzYjJKaGJDQnpaWE56YVc5dUlpa2lJQzB0SUNJa1kzVnlJaWtLT3pzS0oyZGxkQ2NxS1FwM2FHbHNaU0J5WldGa0lDMXlPeUJrYnlCRFQwMVFVa1ZRVEZrclBTZ2lKRkpGVUV4WklpazdJR1J2Ym1VZ1BDQThLR052YlhCblpXNGdMVmNnSWlRb1gydDFZbVZtYzE5amIyMXdiR1YwYVc5dWMxOW1hV3gwWlhJZ0lpSXBJaUF0TFNBaUpHTjFjaUlwQ2pzN0NpZGpaQ2NxS1FwM2FHbHNaU0J5WldGa0lDMXlPeUJrYnlCRFQwMVFVa1ZRVEZrclBTZ2lKRkpGVUV4WklpazdJR1J2Ym1VZ1BDQThLR052YlhCblpXNGdMVmNnSWlRb1gydDFZbVZtYzE5amIyMXdiR1YwYVc5dWMxOW1hV3gwWlhJZ0lpUW9abWx1WkNBaUpIdExWVUpGUmxOZlVrOVBWRG90SkVoUFRVVXZMbXQxWW1WOUlpQXRkSGx3WlNCbUlDMXVZVzFsSUNjdWEzVmlaV052Ym1acFp5Y2dMV1Y0WldNZ1pHbHlibUZ0WlNCN2ZTQmNPeUF5UGk5a1pYWXZiblZzYkNraUtTSWdMUzBnSWlSamRYSWlLUW83T3dvcUtRcDNhR2xzWlNCeVpXRmtJQzF5T3lCa2J5QkRUMDFRVWtWUVRGa3JQU2dpSkZKRlVFeFpJaWs3SUdSdmJtVWdQQ0E4S0dOdmJYQm5aVzRnTFZjZ0lpUW9YMnQxWW1WbWMxOWpiMjF3YkdWMGFXOXVjMTltYVd4MFpYSWdJbWRsZENCalpDQnNhWE4wSUd4cGMzUXRZV3hzSUdGMWRHZ2diRzlqYXlJcElpQXRMU0FpSkdOMWNpSXBDanM3Q21WellXTUtmU0FtSmdwamIyMXdiR1YwWlNBdFJpQmZhM1ZpWldaelgyTnZiWEJzWlhScGIyNXpJR3QxWW1WbWN3bz0gfCBiYXNlNjQgLS1kZWNvZGUpIgp9Cl9rZnNfcHJpbnRmX3N0ZGVycigpIHsKaWYgdGVzdCAkIyAtZXEgMDsgdGhlbgpfa2ZzX3ByaW50Zl9zdGRlcnIgJyVzXG4nICIkKGNhdCkiCmVsc2UKcHJpbnRmIC0tICIkQCIgPi9kZXYvc3RkZXJyCmZpCn0KX2tmbV9pcHJpbnRmKCkgewppZiBjYXNlICIkey06LX0iIGluICppKikgdHJ1ZTs7ICopIGZhbHNlOzsgZXNhYyB8fCB0ZXN0ICIke0tVQkVGU19ERUJVRzotZmFsc2V9IiA9ICd0cnVlJzsgdGhlbgppZiB0ZXN0ICQjIC1lcSAwOyB0aGVuCmNhdCB8IF9rZnNfcHJpbnRmX3N0ZGVycgplbHNlCl9rZnNfcHJpbnRmX3N0ZGVyciAiJEAiCmZpCmZpCn0KX2tmc19kZWJ1ZygpIHsKaWYgdGVzdCAiJHtLVUJFRlNfREVCVUc6LWZhbHNlfSIgPSAndHJ1ZSc7IHRoZW4KaWYgdGVzdCAkIyAtZXEgMDsgdGhlbgpjYXQgfCBfa2ZzX3ByaW50Zl9zdGRlcnIKZWxzZQpfa2ZzX3ByaW50Zl9zdGRlcnIgIiRAIgpmaQpmaQp9Cl9rZnNfcGFyZW50cygpICgKZGlybmFtZT0iJHsxOi0kKHB3ZCl9IgppZiB0ZXN0ICIkZGlybmFtZSIgIT0gJy8nOyB0aGVuCnByaW50ZiAnJXNcbicgIiRkaXJuYW1lIgpfa2ZzX3BhcmVudHMgIiQoZGlybmFtZSAiJGRpcm5hbWUiKSIKZWxzZQpwcmludGYgJy9cbicKcmV0dXJuIDAKZmkKKQpfa2ZzX2Rpcm5hbWUoKSAoCmlmIHRlc3QgLWQgIiR7MTotfSI7IHRoZW4KcHJpbnRmICclc1xuJyAiJDEiCmVsaWYgdGVzdCAtZSAiJHsxOi19IjsgdGhlbgpkaXJuYW1lICIkMSIKZWxzZQo6CmZpCikKX2tmc19yZXNvbHZlX3N5bWxpbmsoKSB7CmF3ayBcCi12IExJTks9IiQxIiBcCi12IExJU1Q9IiQoTENfQUxMPUMgY29tbWFuZCBscyAtbCAiJDEiKSIgXAonQkVHSU4gewpMSU5LX0xFTj1sZW5ndGgoTElOSykKTElOS19QT1M9aW5kZXgoTElTVCwgTElOSyk7CnByaW50IHN1YnN0cihMSVNULCBMSU5LX1BPUytMSU5LX0xFTis0KQp9Jwp9Cl9rZnNfZmluZF9rdWJlY29uZmlnKCkgKAppZiB0ZXN0IC1uICIke0xPQ0tfS1VCRUNPTkZJRzotfSI7IHRoZW4KY2FuZGlkYXRlPSIkTE9DS19LVUJFQ09ORklHIgplbHNlCmNhbmRpZGF0ZT0kKFwKX2tmc19wYXJlbnRzICIkezE6LX0iIFwKfCB4YXJncyAtSSB7fSBscyAtMSB7fS8ua3ViZWNvbmZpZyAyPi9kZXYvbnVsbCBcCnwgaGVhZCAtbjEgXAopCmZpCmt1YmVjb25maWc9JHtjYW5kaWRhdGU6LSRIT01FLy5rdWJlL2NvbmZpZ30KcHJpbnRmICclc1xuJyAiJGt1YmVjb25maWciCl9rZnNfZGVidWcgJyMgS1VCRUNPTkZJRz0iJXMiXG4nICIka3ViZWNvbmZpZyIKKQpfa2ZzX2xvY2tfc2Vzc2lvbl9zZXQoKSB7Cl9rZnNfZGlybmFtZT0kKF9rZnNfZGlybmFtZSAiJHsxOi19IikKZXhwb3J0IExPQ0tfS1VCRUNPTkZJRz0kKF9rZnNfZmluZF9rdWJlY29uZmlnICIkX2tmc19kaXJuYW1lIikKZXhwb3J0IEtVQkVDT05GSUc9IiRMT0NLX0tVQkVDT05GSUciCl9rZm1faXByaW50ZiAnIyBMT0NLX0tVQkVDT05GSUc9IiVzIlxuJyAiJExPQ0tfS1VCRUNPTkZJRyIKfQpfa2ZzX2xvY2tfc2Vzc2lvbl9kZWwoKSB7CnRlc3QgIiR7S1VCRUNPTkZJRzotfSIgPSAiJHtMT0NLX0tVQkVDT05GSUc6LX0iICYmIHVuc2V0IEtVQkVDT05GSUcgfHwgOgp1bnNldCBMT0NLX0tVQkVDT05GSUcKX2tmbV9pcHJpbnRmICcjIHVuc2V0IExPQ0tfS1VCRUNPTkZJR1xuJwp9Cl9rZnNfbG9ja19zZXNzaW9uX3RvZ2dsZSgpIHsKaWYgdGVzdCAteiAiJHsxOi19IiAtYSAtbiAiJExPQ0tfS1VCRUNPTkZJRyI7IHRoZW4KX2tmc19sb2NrX3Nlc3Npb25fZGVsCmVsc2UKX2tmc19sb2NrX3Nlc3Npb25fc2V0ICIkezE6LX0iCmZpCn0KX2tmc19sb2NrX3Nlc3Npb25fZ2V0KCkgKAppZiB0ZXN0IC1uICIkTE9DS19LVUJFQ09ORklHIjsgdGhlbgp0ZXN0ICIkezE6LX0iID0gImxpc3QiIFwKJiYgcHJpbnRmICdMT0NLX0tVQkVDT05GSUc9IiVzIlxuJyAiJChfa2ZzX2xvY2tfc2Vzc2lvbl9nZXQpIiBcCnx8IHByaW50ZiAnJXNcbicgIiRMT0NLX0tVQkVDT05GSUciCmZpCikKX2tmc19sb2NrX2dsb2JhbF9zZXQoKSAoCl9rZnNfZGlybmFtZT0kKF9rZnNfZGlybmFtZSAiJHsxOi19IikKa3ViZWNvbmZpZz0kKF9rZnNfZmluZF9rdWJlY29uZmlnICIkX2tmc19kaXJuYW1lIikKaWYgdGVzdCAiJGt1YmVjb25maWciID0gIiRIT01FLy5rdWJlL2NvbmZpZyI7IHRoZW4KX2tmc19wcmludGZfc3RkZXJyICcjIElORk86IG5vIGAua3ViZWNvbmZpZ2AgZm91bmQgaW4gZGlyZWN0b3J5IGAlc2AuXG4nICIkKHB3ZCkiCnJldHVybiAxCmVsc2UKdGVzdCAtTCAiJEhPTUUvLmt1YmUvY29uZmlnIiAmJiB1bmxpbmsgIiRIT01FLy5rdWJlL2NvbmZpZyIgfHwgOgppZiAhIHRlc3QgLWUgIiRIT01FLy5rdWJlL2NvbmZpZyI7IHRoZW4KbG4gLXMgIiRrdWJlY29uZmlnIiAiJEhPTUUvLmt1YmUvY29uZmlnIgpfa2ZtX2lwcmludGYgJyMgbG4gLXMgIiVzIiAiJXMiXG4nICIka3ViZWNvbmZpZyIgIiRIT01FLy5rdWJlL2NvbmZpZyIKZWxzZQpfa2ZzX3ByaW50Zl9zdGRlcnIgJyMgRVJST1I6IGAlc2Agbm90IGEgc3ltbGluay5cbicgIiRIT01FLy5rdWJlL2NvbmZpZyIKZmkKZmkKKQpfa2ZzX2xvY2tfZ2xvYmFsX2RlbCgpICgKaWYgdW5saW5rICIkSE9NRS8ua3ViZS9jb25maWciIDI+L2Rldi9udWxsOyB0aGVuCl9rZm1faXByaW50ZiAnIyB1bmxpbmsgIiVzIlxuJyAiJEhPTUUvLmt1YmUvY29uZmlnIgplbHNlCl9rZnNfcHJpbnRmX3N0ZGVyciAnIyBXQVJOSU5HOiBgJXNgIG5vdCBhIHN5bWxpbmsuXG4nICIkSE9NRS8ua3ViZS9jb25maWciCmZpCikKX2tmc19sb2NrX2dsb2JhbF90b2dnbGUoKSAoCmlmIHRlc3QgLXogIiR7MTotfSIgLWEgLUwgIiRIT01FLy5rdWJlL2NvbmZpZyI7IHRoZW4KX2tmc19sb2NrX2dsb2JhbF9kZWwKZWxzZQpfa2ZzX2xvY2tfZ2xvYmFsX3NldCAiJHsxOi19IgpmaQopCl9rZnNfbG9ja19nbG9iYWxfZ2V0KCkgKAppZiB0ZXN0IC1MICIkSE9NRS8ua3ViZS9jb25maWciOyB0aGVuCnRlc3QgIiR7MTotfSIgPSAibGlzdCIgJiYgcHJpbnRmICclcyAtPiAnICIkSE9NRS8ua3ViZS9jb25maWciIHx8IDoKcHJpbnRmICclc1xuJyAiJChfa2ZzX3Jlc29sdmVfc3ltbGluayAiJEhPTUUvLmt1YmUvY29uZmlnIikiCmZpCikKX2tmc19rdWJlYXV0aCgpICgKaWYgdGVzdCAteiAiJDEiIC1hIC1uICIke0xPQ0tfS1VCRUNPTkZJRzotfSI7IHRoZW4KX2tmc19wcmludGZfc3RkZXJyICcjIElORk86IGBMT0NLX0tVQkVDT05GSUdgIGlzIHNldCwgYXR0ZW1wdGluZyB0byBkZWR1Y3QgYC5rdWJlYXV0aGAuXG4nCnNldCAtLSAiJExPQ0tfS1VCRUNPTkZJRyIKZmkKX2tmc19kaXJuYW1lPSQoX2tmc19kaXJuYW1lICIkezE6LX0iKQppZgpzZWFyY2hfa3ViZWF1dGg9JChcCl9rZnNfcGFyZW50cyAiJF9rZnNfZGlybmFtZSIgXAp8IHhhcmdzIC1JIHt9IGxzIC0xIHt9Ly5rdWJlYXV0aCAyPi9kZXYvbnVsbCBcCnwgaGVhZCAtbjEgXAopCnRlc3QgLW4gIiRzZWFyY2hfa3ViZWF1dGgiCnRoZW4Ka3ViZWF1dGg9IiRzZWFyY2hfa3ViZWF1dGgiCmVsc2UKX2tmc19wcmludGZfc3RkZXJyICIjIFdBUk5JTkc6IENvdWxkIG5vdCBmaW5kIGFueSBcYC5rdWJlYXV0aFxgIGluIHBhdGggb3IgcGFyZW50cycgcGF0aHMuXG4iCnJldHVybiAxCmZpCnRlc3QgLXggIiRrdWJlYXV0aCIgfHwgY2htb2QgK3ggIiRrdWJlYXV0aCIKX2tmc19kZWJ1ZyAnIyBrdWJlYXV0aD0iJXMiXG4nICIka3ViZWF1dGgiCmV4cG9ydCBLVUJFQ09ORklHPSQoX2tmc19maW5kX2t1YmVjb25maWcgIiRfa2ZzX2Rpcm5hbWUiKQoiJGt1YmVhdXRoIgopCl9rZnNfa3ViZWN0bCgpICgKZXhwb3J0IEtVQkVDT05GSUc9JChfa2ZzX2ZpbmRfa3ViZWNvbmZpZykKY29tbWFuZCBrdWJlY3RsICIkQCIKKQpfa2ZzX2NkKCkgewppZiB0ZXN0IC16ICIkezE6LX0iOyB0aGVuCmlmCnRlc3QgIiR7S1VCRUZTX0NEX1NFU1NJT046LWZhbHNlfSIgPSAndHJ1ZScgJiYKdGVzdCAtZiAiJChfa2ZzX2xvY2tfc2Vzc2lvbl9nZXQpIgp0aGVuCnNldCAtLSAiJChkaXJuYW1lICIkKF9rZnNfbG9ja19zZXNzaW9uX2dldCkiKSIKZWxpZgp0ZXN0ICIke0tVQkVGU19DRF9TRVNTSU9OOi1mYWxzZX0iID0gJ3RydWUnICYmCnRlc3QgLWYgIiQoX2tmc19sb2NrX2dsb2JhbF9nZXQpIgp0aGVuCnNldCAtLSAiJChkaXJuYW1lICIkKF9rZnNfbG9ja19nbG9iYWxfZ2V0KSIpIgplbHNlCl9rZnNfY21kIGdldApyZXR1cm4gMApmaQpmaQppZiB0ZXN0IC1mICIkMS8ua3ViZWNvbmZpZyI7IHRoZW4KY29tbWFuZCBjZCAtLSAiJDEiCmVsc2UKX2tmc19wcmludGZfc3RkZXJyICcjIElORk86IG5vIGAua3ViZWNvbmZpZ2AgZm91bmQgaW4gZGlyZWN0b3J5IGAlc2AuXG4nICIkMSIKcmV0dXJuIDAKZmkKaWYKdGVzdCAiJHtLVUJFRlNfQ0RfU0VTU0lPTl9MT0NLOi1mYWxzZX0iID0gJ3RydWUnICYmCnRlc3QgIiR7TE9DS19LVUJFQ09ORklHOi19IiAhPSAiJHsxOi19Igp0aGVuCl9rZnNfbG9ja19zZXNzaW9uX3NldCAiJHsxOi19IgpmaQp9Cl9rZnNfY21kKCkgewpjYXNlICR7MTotfSBpbgpjdGx8a3ViZWN0bCkKc2hpZnQKX2tmc19rdWJlY3RsICIkQCIKOzsKZ3xnZXQpCnByaW50ZiAnJXNcbicgIiQoX2tmc19maW5kX2t1YmVjb25maWcpIgo7OwpjZHxqdW1wKQpzaGlmdApfa2ZzX2NkICIkezE6LX0iCjs7CmxzfGxpc3QpCnByaW50ZiAnS1VCRUNPTkZJRz0iJXMiXG4nICIkKF9rZnNfY21kIGdldCkiCjs7CmxhfGxzYXxsaXN0LWFsbCkKX2tmc19jbWQgbGlzdApfa2ZzX2NtZCBsb2NrIHNlc3Npb24gbGlzdApfa2ZzX2NtZCBsb2NrIGdsb2JhbCBsaXN0Cjs7CmF1dGh8YXV0aGVudGljYXRlKQpfa2ZzX2t1YmVhdXRoICIkezI6LX0iCmlmCnRlc3QgIiR7S1VCRUZTX0FVVEhfQVVUT19DRDotZmFsc2V9IiA9ICd0cnVlJyAmJgp0ZXN0IC1uICIkezI6LX0iCnRoZW4KX2tmc19jZCAiJChkaXJuYW1lICIkezI6LX0iKSIKZmkKOzsKbG9jaykKY2FzZSAkezI6LXNlc3Npb259IGluCmdsb2JhbCkKY2FzZSAkezM6LXNldH0gaW4KZGVsfGRlbGV0ZXxybXxyZW1vdmV8dW5zZXQpCl9rZnNfbG9ja19nbG9iYWxfZGVsCjs7CnRvZ2dsZSkKX2tmc19sb2NrX2dsb2JhbF90b2dnbGUgIiR7NDotfSIKOzsKZ3xnZXQpCl9rZnNfbG9ja19nbG9iYWxfZ2V0IGdldAo7Owpsc3xsaXN0KQpfa2ZzX2xvY2tfZ2xvYmFsX2dldCBsaXN0Cjs7CnNldHxhZGR8bWspCl9rZnNfbG9ja19nbG9iYWxfc2V0ICIkezQ6LX0iCjs7CmVzYWMKOzsKc2Vzc2lvbikKY2FzZSAkezM6LXNldH0gaW4KZGVsfGRlbGV0ZXxybXxyZW1vdmV8dW5zZXQpCl9rZnNfbG9ja19zZXNzaW9uX2RlbAo7Owp0b2dnbGUpCl9rZnNfbG9ja19zZXNzaW9uX3RvZ2dsZSAiJHs0Oi19Igo7OwpnfGdldCkKX2tmc19sb2NrX3Nlc3Npb25fZ2V0IGdldAo7Owpsc3xsaXN0KQpfa2ZzX2xvY2tfc2Vzc2lvbl9nZXQgbGlzdAo7OwpzZXR8YWRkfG1rKQpfa2ZzX2xvY2tfc2Vzc2lvbl9zZXQgIiR7NDotfSIKOzsKZXNhYwo7Owplc2FjCjs7CmhlbHB8KikKcHJpbnRmICclc1xuJyAiJF9LRlNfSEVMUCIKOzsKZXNhYwp9Cl9rZnNfd2hpY2goKSB7CndoaWxlIHRlc3QgJCMgLWd0IDA7IGRvCmNvbW1hbmQgLXYgIiQxIiA+L2Rldi9udWxsIDI+JjEgfHwgcmV0dXJuICQ/CnNoaWZ0CmRvbmUKfQpfa2ZzX2FsaWFzKCkgewphbGlhcyAkMT0iX2tmc19jbWQgJDIiCl9rZnNfd2hpY2ggX2t1YmVmc19jb21wbGV0aW9ucyB8fCByZXR1cm4gMApldmFsICIkKHByaW50ZiAiCl9rdWJlZnNfY29tcGxldGlvbnNfJDEoKSB7CmxvY2FsIGNvbXBsCmNvbXBsPVwke0NPTVBfV09SRFNbQF06MX0KKCggQ09NUF9DV09SRCArPSAyICkpCkNPTVBfV09SRFM9KCBrdWJlY3RsICckMicgXCJcJHtjb21wbDotIH1cIiApCl9rdWJlZnNfY29tcGxldGlvbnMKfQpjb21wbGV0ZSAtbyBkZWZhdWx0IC1GIF9rdWJlZnNfY29tcGxldGlvbnNfJDEgJDEKIikiCn0KX2tmc19pbml0X3NvdXJjZWQoKSB7CmFsaWFzIGt1YmVmcz0nX2tmc19jbWQnCn0KX2tmc19pbml0X2ludGVyYWN0aXZlKCkgewp1bnNldCBLVUJFQ09ORklHIExPQ0tfS1VCRUNPTkZJRwppZgp0ZXN0ICIke0tVQkVGU19DT01QTEVUSU9OOi10cnVlfSIgPSAndHJ1ZScgJiYKX2tmc193aGljaCBfZ2V0X2NvbXBfd29yZHNfYnlfcmVmCnRoZW4KX2tmc19iYXNoX2NvbXBsZXRlCmZpCmlmIHRlc3QgIiR7S1VCRUZTX1JFQ09NTUVOREVEX0FMSUFTOi10cnVlfSIgPSAndHJ1ZSc7IHRoZW4KYWxpYXMga3ViZWN0bD0nX2tmc19rdWJlY3RsJwphbGlhcyBrZj0nX2tmc19jbWQnCl9rZnNfd2hpY2ggX2t1YmVmc19jb21wbGV0aW9ucyAmJiBjb21wbGV0ZSAtRiBfa3ViZWZzX2NvbXBsZXRpb25zIGtmIHx8IDoKZmkKaWYgdGVzdCAiJHtLVUJFRlNfT1BUSU9OQUxfQUxJQVM6LXRydWV9IiA9ICd0cnVlJzsgdGhlbgpfa2ZzX2FsaWFzIGtmZyAnbG9jayBnbG9iYWwgdG9nZ2xlJwpfa2ZzX2FsaWFzIGtmZSAnbG9jayBzZXNzaW9uIHNldCcKX2tmc19hbGlhcyBrZmwgJ2xvY2sgc2Vzc2lvbiB0b2dnbGUnCl9rZnNfYWxpYXMga2ZjICdjZCcKX2tmc19hbGlhcyBrZmEgJ2F1dGgnCmFsaWFzIGtmbHM9J19rZnNfY21kIGxpc3QtYWxsJwpmb3IgdG9vbCBpbiAkKHByaW50ZiAnJXNcbicgJHtLVUJFRlNfVE9PTDotdGs6aGVsbX0gfCB0ciAnOicgJyAnKTsgZG8KY29tbWFuZCAtdiAkdG9vbCA+L2Rldi9udWxsIDI+JjEgXAomJiBhbGlhcyAkdG9vbD0iS1VCRUNPTkZJRz1cJChrZikgY29tbWFuZCAkdG9vbCIgfHwgY29udGludWUKZG9uZQpmaQp9CmlmIHRlc3QgIiQoYmFzZW5hbWUgLS0gIiQwIiAnLnNoJykiID0gJ2t1YmVmcyc7IHRoZW4KX2tmc19jbWQgIiRAIgpwcmludGYgLS0gJy0tLQpXQVJOSU5HOiBleGVjdXRpbmcgYGt1YmVmc2AgYXMgYW4gZXhlY3V0YWJsZSBpcyBub3QgcmVjb21tZW5kZWQuXG4KT25seSB0aGUgZm9sbG93aW5nIGNvbW1hbmRzIGZpbGwgd29yayBpbiB0aGlzIG1vZGU6XG4KLSBjdGwKLSBnZXQKLSBscwotIGxzYSwgZXhjZXB0IHNlc3Npb24KLSBhdXRoCi0gbG9jayBnbG9iYWxcbgpUaGUgcmVjb21tZW5kZWQgd2F5IGlzIHRvIHNvdXJjZSBpdCwgdGhhdCBiZSBpbiB5b3VyIHNoZWxsIG9yIHNjcmlwdC4KLS0tXG4nIFwKfCBzZWQgLUUgJ3MjXlxzezJ9IyMnIHwgX2tmc19wcmludGZfc3RkZXJyCmVsc2UKX2tmc19pbml0X3NvdXJjZWQKaWYKY2FzZSAiJHstOi19IiBpbiAqaSopIHRydWU7OyAqKSBmYWxzZTs7IGVzYWMgJiYKdGVzdCAtdCAxICYmCnRlc3QgIiR7IzotMH0iIC1lcSAwCnRoZW4KX2tmc19pbml0X2ludGVyYWN0aXZlCmZpCmZpCl9LRlNfSEVMUD0kKGNhdCA8PCdFT0YnCk1hbmFnZSBtdWx0aXBsZSBrdWJlY29uZmlncyB3aXRoIHlvdXIgZmlsZXN5c3RlbQoKIyBVc2FnZQoKa3ViZWZzICA8Y29tbWFuZDE+IFtjb21tYW5kMl0gLi4uIFtjb21tYW5kTl0gW3BhdGhdCgojIEF2YWlsYWJsZSBjb21tYW5kcwoKZ2V0CiAgcHJpbnRzIHRoZSBjdXJyZW50IEtVQkVDT05GSUcKCmNkIFtwYXRoXQogIGNkIHRvIGEgZGlyZWN0b3J5IGNvbnRhaW5pbmcgYSAua3ViZWNvbmZpZywgYW5kIGxvY2sgc2Vzc2lvbi4gSWYgbm8gYXJndW1lbnQKICBpcyBnaXZlbiBpdCB3aWxsIGNkIHRvIHRoZSBjdXJyZW50IEtVQkVDT05GSUcuCgpsaXN0CiAgcHJpbnRzIHRoZSBjdXJyZW50IEtVQkVDT05GSUcgYXMgYW4gZW52IHZhcmlhYmxlCgpsaXN0LWFsbAogIHNob3dzIHNoZWxsLCBzZXNzaW9uIGFuZCBnbG9iYWxseSBsb2NrZWQgS1VCRUNPTkZJRwoKYXV0aCBbcGF0aF0KICBleGVjdXRlcyBgLmt1YmVhdXRoYCBpbiBwYXRoLCBpZiBwYXRoIG5vdCBzcGVjaWZpZWQgaXQgd2lsbCB1c2UgY3VycmVudAogIHdvcmtpbmcgZGlyZWN0b3J5Cgpsb2NrCiAgPGdsb2JhbC9zZXNzaW9uPgogICAgPHNldD4gW3BhdGhdCiAgICAgIGxvY2tzIEtVQkVDT05GSUcgdG8gcGF0aAogICAgPHRvZ2dsZT4KICAgICAgdG9nZ2xlcyBsb2NrCiAgICA8ZGVsPgogICAgICBkZWxldGUgbG9jawogICAgPGdldD4KICAgICAgcHJpbnRzIHRoZSBjdXJyZW50IGxvY2sgaWYgYW55CiAgICA8bGlzdD4KICAgICAgcHJpbnRzIHRoZSBjdXJyZW50IGxvY2sgYXMgYW4gZW52IHZhcmlhYmxlCgojIEF2YWlsYWJsZSBhcmd1bWVudHMKCnBhdGggIGEgZmlsZSBvciBkaXJlY3RvcnkgZGVwZW5kaW5nIG9uIHRoZSBjb21tYW5kLiBJZiBhIGRpcmVjdG9yeSBpcyBnaXZlbiwgYW5kCiAgICAgIHRoZSBjb21tYW5kIGRvZXMgbm90IGZpbmQgLmt1YmVjb25maWcgb3IgLmt1YmVhdXRoLCBpdCB3aWxsIHNlYXJjaCBmb3IgdGhlCiAgICAgIGZpcnN0IG9jY3VyZW5jZSBvZiB0aGUgZmlsZSBpbiB0aGUgcGFyZW50IHRyZWUuCgojIE9wdGlvbnMKCktVQkVGU19DRF9TRVNTSU9OIChkZWZhdWx0OiBgZmFsc2VgKQogIHdoZW4gdXNpbmcgYGt1YmVmcyBjZGAgd2l0aG91dCBgcGF0aGAgYXMgYW4gYXJndW1lbnQsIHNldCBwYXRoIHRvIHRoZSBzZXNzaW9uCiAgbG9jaydzIGRpcmVjdG9yeSBpZiBzZXQsIGlmIG5vdCBhdHRlbXB0IGdsb2JhbCBsb2NrJ3MgZGlyZWN0b3J5LgoKS1VCRUZTX0NEX1NFU1NJT05fTE9DSyAoZGVmYXVsdDogYGZhbHNlYCkKICB3aGVuIHVzaW5nIGBrdWJlZnMgY2RgIHdpdGggYHBhdGhgIGFzIGFuIGFyZ3VtZW50LCBkbyBhCiAgYGt1YmVmcyBsb2NrIHNlc3Npb24gc2V0YCB0b3dhcmRzIHRoYXQgYHBhdGhgLgoKS1VCRUZTX0FVVEhfQVVUT19DRCAoZGVmYXVsdDogYGZhbHNlYCkKICB3aGVuIHVzaW5nIGBrdWJlZnMgYXV0aGAgd2l0aCBgcGF0aGAgYXMgYW4gYXJndW1lbnQsIGNkIHRvIHRoYXQgcGF0aC4KCktVQkVGU19SRUNPTU1FTkRFRF9BTElBUyAoZGVmYXVsdDogYHRydWVgKQogIHJlY29tbWVuZGVkIGFsaWFzZXMgdGhhdCBtYWtlcyBzaG9ydCBhbGlhc2VzIG9mIGxvbmcgY29tbWFuZHMuIE9ubHkgdHVybiBvZmYKICBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuCiAgICAtIGBrZmAgLT4gYGt1YmVmc2AKICAgIC0gYGt1YmVmc2AgLT4gYGt1YmVmc2AsIHNldCBgS1VCRUNPTkZJR2AgdG8gYC5rdWJlY29uZmlnYCdzIHBhdGgKCktVQkVGU19PUFRJT05BTF9BTElBUyAgKGRlZmF1bHQ6IGB0cnVlYCkKICByZWNvbW1lbmRlZCBhbGlhc2VzIHRoYXQgbWFrZXMgc2hvcnQgYWxpYXNlcyBvZiBsb25nIGNvbW1hbmRzLgogICAgLSBga2ZnYCBga3ViZWZzIGxvY2sgZ2xvYmFsIHRvZ2dsZWAKICAgIC0gYGtmZWAgYGt1YmVmcyBsb2NrIHNlc3Npb24gc2V0YAogICAgLSBga2ZsYCBga3ViZWZzIGxvY2sgc2Vzc2lvbiB0b2dnbGVgCiAgICAtIGBrZmNgIGBrdWJlZnMgY2RgCiAgICAtIGBrZmFgIGBrdWJlZnMgYXV0aGAKICAgIC0gYGtmbHNgIGBrdWJlZnMgbGlzdC1hbGxgCiAgICAtIGZvciBlYWNoIHRvb2wgaW4gYEtVQkVGU19UT09MYCBzZXQgYEtVQkVDT05GSUdgIHRvIGAua3ViZWNvbmZpZ2AncyBwYXRoIAoKS1VCRUZTX1RPT0wgKGRlZmF1bHQ6IGB0azpoZWxtYCkKICBhIGxpc3Qgb2YgdG9vbHMsIHNlcGFyYXRlZCBieSBgOmAuIFNlZSBgS1VCRUZTX09QVElPTkFMX0FMSUFTYC4KCktVQkVGU19DT01QTEVUSU9OIChkZWZhdWx0OiBgdHJ1ZWApCiAgYXV0b21hdGljIHNvdXJjaW5nIG9mIGt1YmVmcyBjb21wbGV0aW9uIChiYXNoIHNoZWxsKS4gRGVmYXVsdHMgdG8gZmFsc2UgaWYKICBiYXNoIGlzIG5vdCB0aGUgY3VycmVudCBzaGVsbC4KCktVQkVGU19ERUJVRyAoZGVmYXVsdDogYGZhbHNlYCkKICBlbmFibGUgZGVidWdnaW5nCgojIEV4YW1wbGVzCiMjIE9wdGlvbnMKCmBLVUJFRlNfQ0RfU0VTU0lPTmAsIGBLVUJFRlNfQ0RfU0VTU0lPTl9MT0NLYCwgYEtVQkVGU19BVVRIX0FVVE9fQ0RgOiB3aGlsZQpgZmFsc2VgIGJ5IGRlZmF1bHQsIGB0cnVlYCBpcyByZWNvbW1lbmRlZCBmb3IgaGVhdnkgc2hlbGwgdXNlcnMuIEFkZCB0byB5b3VyCn4vLnByb2ZpbGU6CgpgYGAKS1VCRUZTX0NEX1NFU1NJT049dHJ1ZQpLVUJFRlNfQ0RfU0VTU0lPTl9MT0NLPXRydWUKS1VCRUZTX0FVVEhfQVVUT19DRD10cnVlCmBgYAoKIyBBYm91dAoKIyMgUHJlY2VkZW50Cgpga3ViZWZzYCB3aWxsIHRlbGwgYGt1YmVjdGxgIHRvIHVzZSBhIGNvbmZpZyBmaWxlIGluIHRoZSBmb2xsb3cgb3JkZXI6CgoxLiBsb2NrIHNlc3Npb24gKGBMT0NLX0tVQkVDT05GSUdgKQoyLiBgLmt1YmVjb25maWdgIGluIGN1cnJlbnQgcGF0aCBvciBmaXJzdCBvY2N1cmVuY2UgaW4gdGhlIHBhcmVudCB0cmVlLgozLiBsb2NrIGdsb2JhbCAoYH4va3ViZS9jb25maWdgKQoKIyBOb3RlcwoKIyMgS1VCRUNPTkZJRwoKV2hlbiB1c2luZy9zb3VyY2luZyBga3ViZWZzYCB3aXRoIGBLVUJFRlNfUkVDT01NRU5ERURfQUxJQVM9dHJ1ZWAgKGRlZmF1bHQpIHlvdQpjYW4gbm8gbG9uZ2VyIHNwZWNpZnkgYEtVQkVDT05GSUdgLCB1c2UgYGt1YmVjdGwgLS1rdWJlY29uZmlnYCBpbnN0ZWFkLCBvcgpkaXNhYmxlIGBLVUJFRlNfUkVDT01NRU5ERURfQUxJQVM9ZmFsc2VgIGFuZCBgdW5hbGlhcyBrdWJlY3RsYCBpbiBvcGVuIHNoZWxscy4KRU9GCikK' | base64 --decode > "$KUBEFS_DIR/kubefs.sh"
printf '%s\n' 'IyEvYmluL3NoCiMgaHR0cHM6Ly9naXRodWIuY29tL2R4bHI4ci9rdWJlZnMKIyBoYXZpbmcgYC5rdWJlYXV0aGAgYW5kIGAua3ViZWNvbmZpZ2AgaW4gdGhlIHNhbWUgZGlyZWN0b3J5IGlzIGEgZ29vZCBwcmFjdGljZS4gQnV0IG5vdCByZXF1aXJlZCBieSBrdWJlZnMuCgpFTVBUWV9LVUJFQ09ORklHPSdhcGlWZXJzaW9uOiB2MQpraW5kOiBDb25maWcKY2x1c3RlcnM6IFtdCmNvbnRleHRzOiBbXQpjdXJyZW50LWNvbnRleHQ6ICIiCnVzZXJzOiBbXScKClNQQVRIPSQoQ0RQQVRIPSBjZCAtLSAiJChkaXJuYW1lIC0tICIkMCIpIiAmJiBwd2QpCiMgY2hlY2sgaWYgLmt1YmVjb25maWcgZXhpc3QgaW4gdGhlIHNhbWUgZGlyZWN0b3J5IGFzIGt1YmVsb2dpbl9pbml0IGlzIGNhbGxlZC9zb3VyY2VkCmlmICEgdGVzdCAtZiAiJHtTUEFUSH0vLmt1YmVjb25maWciOyB0aGVuCiAgcHJpbnRmICclc1xuJyAiJEVNUFRZX0tVQkVDT05GSUciID4gIiR7U1BBVEh9Ly5rdWJlY29uZmlnIgogIGNobW9kIDYwMCAiJHtTUEFUSH0vLmt1YmVjb25maWciCmZpCmV4cG9ydCBLVUJFQ09ORklHPSIke1NQQVRIfS8ua3ViZWNvbmZpZyIKCmt1YmVjdGwgYXV0aCBjYW4taSAtLWxpc3QgPi9kZXYvbnVsbCAyPiYxIFwKJiYgS1VCRV9BVVRIRU5USUNBVEVEPXRydWUgXAp8fCB1bnNldCBLVUJFX0FVVEhFTlRJQ0FURUQK' | base64 --decode > "$KUBEFS_DIR/kubeauth_init.sh"
printf '%s\n' 'IyEvYmluL3NoCiMgaHR0cHM6Ly9naXRodWIuY29tL2R4bHI4ci9rdWJlZnMKX2tmc19hZGRvbnNfa3ViZWN0bF9hbGlhc19jb21wbGV0ZSgpIHsKdGVzdCAiJHtLVUJFRlNfQ09NUExFVElPTjotdHJ1ZX0iID0gJ3RydWUnIHx8IHJldHVybiAwCnRlc3QgLXQgMSB8fCByZXR1cm4gMApjb21tYW5kIC12IF9nZXRfY29tcF93b3Jkc19ieV9yZWYgPi9kZXYvbnVsbCAyPiYxIHx8IHJldHVybiAwCmNvbW1hbmQgLXYgX19zdGFydF9rdWJlY3RsID4vZGV2L251bGwgMj4mMSB8fCByZXR1cm4gMApldmFsICIkKHByaW50ZiAiCl9rdWJlY3RsX2NvbXBsZXRpb25zXyQxKCkgewpsb2NhbCBjb21wbApjb21wbD1cJHtDT01QX1dPUkRTW0BdOjF9CigoIENPTVBfQ1dPUkQgKz0gMiApKQpDT01QX1dPUkRTPSgga3ViZWN0bCAkMiBcIlwke2NvbXBsOi0gfVwiICkKX19zdGFydF9rdWJlY3RsCn0KY29tcGxldGUgLW8gZGVmYXVsdCAtRiBfa3ViZWN0bF9jb21wbGV0aW9uc18kMSAkMQoiKSIKfQpfa2ZzX2FkZG9uc19rdWJlY3RsX2FsaWFzX2NvbXBsZXRlIGt4ICdjb25maWcgdXNlLWNvbnRleHQnCmt4KCkgKAppZiBjb21tYW5kIC12IGt1YmVmcyA+L2Rldi9udWxsIDI+JjE7IHRoZW4KZXhwb3J0IEtVQkVDT05GSUc9JChrdWJlZnMpCmZpCmlmIHRlc3QgIiQxIjsgdGhlbgprdWJlY3RsIGNvbmZpZyB1c2UtY29udGV4dCAiJDEiCmVsc2UKX3JjdHg9JChrdWJlY3RsIGNvbmZpZyBnZXQtY29udGV4dHMpCl9oZWFkZXI9JChwcmludGYgJyVzXG4nICIkX3JjdHgiIHwgaGVhZCAtbjEpCl9tYXhfbGVuPSQocHJpbnRmICclc1xuJyAiJF9yY3R4IiB8IGF3ayAne3ByaW50IGxlbmd0aH0nIHwgc29ydCAtcm4gfCBoZWFkIC1uMSkKX3NlcD0kJ1x0JwpfY29sdW1ucz0ke0tYX0NPTFVNTlM6LSdOQU1FLE5BTUVTUEFDRSxDTFVTVEVSLENVUlJFTlQnfQpfY3R4PSQocHJpbnRmICclc1xuJyAiJF9yY3R4IiBcCnwgYXdrIC12IFNFUD0iJF9zZXAiIC12IENPTFVNTlM9IiRfY29sdW1ucyIgXAotdiBIRUFEPSIkX2hlYWRlciIgLXYgTUFYTEVOPSIkX21heF9sZW4iIFwKJ0JFR0lOIHsKc3BsaXQoQ09MVU1OUywgVENPTCwgIiwiKQpUQ09MX0xFTj0wOyBmb3IoQ09MIGluIFRDT0wpeyBUQ09MX0xFTisrIH0KR0FQPTM7CkNVUlJFTlRfU1RBUlQ9MDsKQ1VSUkVOVF9MRU49aW5kZXgoSEVBRCwgIk5BTUUiKS0xOwpOQU1FX1NUQVJUPUNVUlJFTlRfTEVOKzE7Ck5BTUVfTEVOPWluZGV4KEhFQUQsICJDTFVTVEVSIiktTkFNRV9TVEFSVDsKQ0xVU1RFUl9TVEFSVD1OQU1FX1NUQVJUK05BTUVfTEVOCkNMVVNURVJfTEVOPWluZGV4KEhFQUQsICJBVVRISU5GTyIpLUNMVVNURVJfU1RBUlQ7CkFVVEhJTkZPX1NUQVJUPUNMVVNURVJfU1RBUlQrQ0xVU1RFUl9MRU4KQVVUSElORk9fTEVOPWluZGV4KEhFQUQsICJOQU1FU1BBQ0UiKS1BVVRISU5GT19TVEFSVDsKTkFNRVNQQUNFX1NUQVJUPUFVVEhJTkZPX1NUQVJUK0FVVEhJTkZPX0xFTgpOQU1FU1BBQ0VfTEVOPU1BWExFTi1OQU1FU1BBQ0VfU1RBUlQ7Cn0KewpEQ09MWyJDVVJSRU5UIl09c3Vic3RyKCQwLCBDVVJSRU5UX1NUQVJULCBDVVJSRU5UX0xFTi1HQVApOwpEQ09MWyJOQU1FIl09c3Vic3RyKCQwLCBOQU1FX1NUQVJULCBOQU1FX0xFTi1HQVApOwpEQ09MWyJDTFVTVEVSIl09c3Vic3RyKCQwLCBDTFVTVEVSX1NUQVJULCBDTFVTVEVSX0xFTi1HQVApOwpEQ09MWyJBVVRISU5GTyJdPXN1YnN0cigkMCwgQVVUSElORk9fU1RBUlQsIEFVVEhJTkZPX0xFTi1HQVApOwpfTkFNRVNQQUNFPXN1YnN0cigkMCwgTkFNRVNQQUNFX1NUQVJUKTsKZm9yIChpID0gMDsgaSA8PSAoTUFYTEVOLWxlbmd0aCgkMCktMSk7IGkrKykgeyBfTkFNRVNQQUNFPV9OQU1FU1BBQ0UgIiAiIH0KRENPTFsiTkFNRVNQQUNFIl09X05BTUVTUEFDRQpmb3IoaT0xOyBpIDw9IFRDT0xfTEVOOyBpKyspIHsKcHJpbnRmICIlcyIsIERDT0xbVENPTFtpXV0KaWYoaSA8IFRDT0xfTEVOKSB7IHByaW50ZiAiJXMiLCBTRVAgfQp9CnByaW50ZiAiXG4iCn0nKQpfY3VycmVudF9jb2w9JChcCnByaW50ZiAnJXMnICIkX2NvbHVtbnMiIFwKfCB0ciAsICdcbidcCnwgYXdrICd7aWYoJDEgPT0gIkNVUlJFTlQiKSB7cHJpbnQgTlJ9IH0nKQppZiB0ZXN0IC10IDE7IHRoZW4KcHJpbnRmICclc1xuJyAiJF9jdHgiIHwgaGVhZCAtbjEKZmkKcHJpbnRmICclc1xuJyAiJF9jdHgiIFwKfCBhd2sgJ3tpZihOUiA+IDEpIHtwcmludH19JyBcCnwgc29ydCAtdCAiJF9zZXAiIC1rJHtfY3VycmVudF9jb2x9cgpmaQopCl9rZnNfYWRkb25zX2t1YmVjdGxfYWxpYXNfY29tcGxldGUga24gJ2dldCBucyAtLW5vLWhlYWRlcnMgLW8gY3VzdG9tLWNvbHVtbnM9IjoubWV0YWRhdGEubmFtZSInCmtuKCkgKAppZiBjb21tYW5kIC12IGt1YmVmcyA+L2Rldi9udWxsIDI+JjE7IHRoZW4KZXhwb3J0IEtVQkVDT05GSUc9JChrdWJlZnMpCmZpCmlmIHRlc3QgIiQxIjsgdGhlbgprdWJlY3RsIGNvbmZpZyBzZXQtY29udGV4dCAkMQplbHNlCl9jdXJyZW50PSQoa3ViZWN0bCBjb25maWcgdmlldyAtLW1pbmlmeSAtbyBqc29ucGF0aD0iey4ubmFtZXNwYWNlfSIpCl9hbGw9JChrdWJlY3RsIGdldCBucyAtbyBuYW1lIHwgY3V0IC1kLyAtZjIpCl9tYXhfbGVuPSQocHJpbnRmICclc1xuJyAiJF9hbGwiIHwgYXdrICd7cHJpbnQgbGVuZ3RofScgfCBzb3J0IC1ybiB8IGhlYWQgLW4xKQpfc2VwPSQnXHQnCl9ucz0kKHByaW50ZiAnJXNcbicgIiRfYWxsIiBcCnwgcHJpbnRmICclc1x0JXNcbiVzXG4nICdOQU1FJyAnQ1VSUkVOVCcgIiQoY2F0KSIgXAp8IGF3ayAtdiBDVVJSRU5UPSIkX2N1cnJlbnQiIC12IFNFUD0iJF9zZXAiIC12IE1BWExFTj0iJF9tYXhfbGVuIiAnCnsKcHJpbnRmICIlcyIsICQxCmZvcihpID0gMTsgaSA8PSAoTUFYTEVOLWxlbmd0aCgkMSkpOyBpKyspIHsKcHJpbnRmICIgIgp9CnByaW50ZiAiJXMiLFNFUAppZigkMSA9PSBDVVJSRU5UKSB7IHByaW50ZiAiJXMiLCAiKiIgfQplbHNlIHsgcHJpbnRmICIlcyIsICQyIH0KcHJpbnRmICJcbiIKfScpCmlmIHRlc3QgLXQgMTsgdGhlbgpwcmludGYgJyVzXG4nICIkX25zIiB8IGhlYWQgLW4xCmZpCnByaW50ZiAiJXNcbiIgIiRfbnMiIFwKfCBhd2sgJ3tpZihOUiA+IDEpIHtwcmludH19JyBcCnwgc29ydCAtdCAiJF9zZXAiIC1rMnIKZmkKKQprdWJlYXV0aF9pbml0KCkgewppZiB0ZXN0IC1lICIkezE6LSQocHdkKX0vLmt1YmVhdXRoIjsgdGhlbgpwcmludGYgJ0VSUk9SOiBgJXNgIGFscmVhZHkgZXhpc3RzLlxuJyAiJHsxOi19Ly5rdWJlYXV0aCIgPiAvZGV2L3N0ZGVycgpyZXR1cm4gMQplbHNlCnByaW50ZiAnJWInICcjIS9iaW4vc2hcbnNldCAtZVxuXG4jIHNvdXJjZSBrdWJlYXV0aF9pbml0LnNoXG4uICRIT01FLy5sb2NhbC9zaGFyZS9rdWJlZnMva3ViZWF1dGhfaW5pdC5zaCAyPi9kZXYvbnVsbCB8fCBcXFxuLiAvdXNyL3NoYXJlL2t1YmVmcy9rdWJlYXV0aF9pbml0LnNoXG5cbiMgaWYgYWxyZWFkeSBhdGhlbnRpY2F0ZWQsIGV4aXRcbnRlc3QgLW4gIiR7S1VCRV9BVVRIRU5USUNBVEVEOi19IiAmJiBleGl0IHx8IDpcblxuIyBteWF1dGhfY21kXG4nID4gIiR7MTotJChwd2QpfS8ua3ViZWF1dGgiCmZpCn0K' | base64 --decode > "$KUBEFS_DIR/kubefs_addons.sh"
